<svg xmlns="http://www.w3.org/2000/svg" width="1031.5546875px" height="1210px" class="sequence simple"><desc>Logging in with Authorization Code Flow with PKCE</desc><defs><marker viewBox="0 0 5 5" markerWidth="5" markerHeight="5" orient="auto" refX="5" refY="2.5" id="markerArrowBlock"><path d="M 0 0 L 5 2.5 L 0 5 z"/></marker><marker viewBox="0 0 9.6 16" markerWidth="4" markerHeight="16" orient="auto" refX="9.6" refY="8" id="markerArrowOpen"><path d="M 9.6,8 1.92,16 0,13.7 5.76,8 0,2.286 1.92,0 9.6,8 z"/></marker></defs><g class="title"><rect x="10" y="10" width="480.484375" height="28" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="15" y="29.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="15">Logging in with Authorization Code Flow with PKCE</tspan></text></g><g class="actor"><rect x="192.234375" y="48" width="39.203125" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="202.234375" y="72.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="202.234375">RP</tspan></text></g><g class="actor"><rect x="192.234375" y="1152" width="39.203125" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="202.234375" y="1176.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="202.234375">RP</tspan></text></g><line x1="211.8359375" x2="211.8359375" y1="86" y2="1152" stroke="#000000" fill="none" style="stroke-width: 2;"/><g class="actor"><rect x="351.453125" y="48" width="144.828125" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="361.453125" y="72.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="361.453125">Alice's WebID</tspan></text></g><g class="actor"><rect x="351.453125" y="1152" width="144.828125" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="361.453125" y="1176.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="361.453125">Alice's WebID</tspan></text></g><line x1="423.8671875" x2="423.8671875" y1="86" y2="1152" stroke="#000000" fill="none" style="stroke-width: 2;"/><g class="actor"><rect x="630.5" y="48" width="116.015625" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="640.5" y="72.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="640.5">Alice's OP</tspan></text></g><g class="actor"><rect x="630.5" y="1152" width="116.015625" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="640.5" y="1176.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="640.5">Alice's OP</tspan></text></g><line x1="688.5078125" x2="688.5078125" y1="86" y2="1152" stroke="#000000" fill="none" style="stroke-width: 2;"/><g class="actor"><rect x="904.7421875" y="48" width="96.8125" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="914.7421875" y="72.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="914.7421875">RP WebID</tspan></text></g><g class="actor"><rect x="904.7421875" y="1152" width="96.8125" height="38" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="914.7421875" y="1176.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="914.7421875">RP WebID</tspan></text></g><line x1="953.1484375" x2="953.1484375" y1="86" y2="1152" stroke="#000000" fill="none" style="stroke-width: 2;"/><g class="note"><rect x="48.40625" y="106" width="326.859375" height="28" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="53.40625" y="125.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="53.40625">1.Alice uses the decentphotos app</tspan></text></g><g class="note"><rect x="58.0078125" y="154" width="307.65625" height="28" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="63.0078125" y="173.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="63.0078125">2. Alice selets her OP or WebID</tspan></text></g><g class="signal"><text x="221.8359375" y="212.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="221.8359375">2.1 Retrieve Profile</tspan></text><line x1="211.8359375" x2="423.8671875" y1="220" y2="220" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"/></g><g class="signal"><text x="317.8515625" y="245" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="317.8515625"/></text><line x1="423.8671875" x2="211.8359375" y1="240" y2="240" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"/></g><g class="signal"><text x="310.9453125" y="270.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="310.9453125">3. Retrieves OP configuration</tspan></text><line x1="211.8359375" x2="688.5078125" y1="278" y2="278" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"/></g><g class="signal"><text x="450.171875" y="303" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="450.171875"/></text><line x1="688.5078125" x2="211.8359375" y1="298" y2="298" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"/></g><g class="note"><rect x="14.8046875" y="318" width="394.0625" height="28" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="19.8046875" y="337.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="19.8046875">4. Generates PKCE code and code verifier</tspan></text></g><g class="note"><rect x="10" y="366" width="403.671875" height="28" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="15" y="385.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="15">5. Saves code verifier to session storage</tspan></text></g><g class="signal"><text x="334.953125" y="424.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="334.953125">6. Authorization Request</tspan></text><line x1="211.8359375" x2="688.5078125" y1="432" y2="432" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"/></g><g class="signal"><text x="739.2109375" y="462.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="739.2109375">7. Fetch RP WebID</tspan></text><line x1="688.5078125" x2="953.1484375" y1="470" y2="470" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"/></g><g class="signal"><text x="820.828125" y="495" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="820.828125"/></text><line x1="953.1484375" x2="688.5078125" y1="490" y2="490" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"/></g><g class="note"><rect x="510.6796875" y="510" width="355.65625" height="28" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="515.6796875" y="529.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="515.6796875">8. Validates redirect url with WebID</tspan></text></g><g class="note"><rect x="606.6953125" y="558" width="163.625" height="28" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="611.6953125" y="577.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="611.6953125">9. Alice Logs In</tspan></text></g><g class="note"><rect x="587.4921875" y="606" width="202.03125" height="28" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="592.4921875" y="625.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="592.4921875">10. Generates a code</tspan></text></g><g class="signal"><text x="306.1484375" y="664.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="306.1484375">11. Sends code to redirect url</tspan></text><line x1="688.5078125" x2="211.8359375" y1="672" y2="672" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"/></g><g class="note"><rect x="43.609375" y="692" width="336.453125" height="28" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="48.609375" y="711.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="48.609375">12. Generates DPoP Client Key Pair</tspan></text></g><g class="note"><rect x="77.2109375" y="740" width="269.25" height="28" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="82.2109375" y="759.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="82.2109375">13. Generates a DPoP Header</tspan></text></g><g class="signal"><text x="238.9375" y="798.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="238.9375">14. Token requst with code and code verifier</tspan></text><line x1="211.8359375" x2="688.5078125" y1="806" y2="806" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"/></g><g class="note"><rect x="553.8828125" y="826" width="269.25" height="28" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="558.8828125" y="845.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="558.8828125">15. Validates code verifier</tspan></text></g><g class="note"><rect x="520.28125" y="874" width="336.453125" height="28" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="525.28125" y="893.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="525.28125">16. Validates DPoP Token signature</tspan></text></g><g class="note"><rect x="433.8671875" y="922" width="509.28125" height="28" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="438.8671875" y="941.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="438.8671875">17. Converts the DPoP public key to a JWK thumbprint</tspan></text></g><g class="note"><rect x="558.6875" y="970" width="259.640625" height="28" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="563.6875" y="989.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="563.6875">18. Generates access token</tspan></text></g><g class="note"><rect x="577.890625" y="1018" width="221.234375" height="28" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="582.890625" y="1037.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="582.890625">19. Generates id token</tspan></text></g><g class="note"><rect x="553.8828125" y="1066" width="269.25" height="28" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"/><text x="558.8828125" y="1085.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="558.8828125">20. Generates refresh token</tspan></text></g><g class="signal"><text x="373.359375" y="1124.5" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="373.359375">21. Sends tokens</tspan></text><line x1="688.5078125" x2="211.8359375" y1="1132" y2="1132" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"/></g></svg>